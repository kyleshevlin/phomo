{"version":3,"file":"phomo.module.js","sources":["../src/index.js"],"sourcesContent":["export const h = tag => (props = {}) => (...children) => ({\n  tag,\n  props,\n  children,\n  key: props.key\n})\n\nconst nodeToDOM = ({ tag, props, children }) => {\n  const el = document.createElement(tag)\n\n  for (let key in props) {\n    const value = props[key]\n\n    if (typeof value === 'function') {\n      el[key] = value\n    } else {\n      el.setAttribute(key, value)\n    }\n  }\n\n  children.forEach(child => {\n    if (typeof child === 'string') {\n      el.appendChild(document.createTextNode(child))\n    } else {\n      el.appendChild(nodeToDOM(child))\n    }\n  })\n\n  return el\n}\n\nconst render = entry => view => {\n  entry.innerHTML = ''\n  entry.appendChild(nodeToDOM(view))\n}\n\nexport const app = (entry, view, actions, state) => {\n  let appState = state\n  const renderEntry = render(entry)\n  const viewWithActions = view(bindActions(actions))\n  const firstView = viewWithActions(appState)\n\n  renderEntry(firstView)\n\n  function bindActions(actions) {\n    return Object.keys(actions).reduce((boundActions, key) => {\n      const action = actions[key]\n\n      boundActions[key] = value => {\n        appState = Object.assign({}, action(value)(appState))\n        renderEntry(viewWithActions(appState))\n      }\n\n      return boundActions\n    }, {})\n  }\n}\n"],"names":["h","props","children","key","nodeToDOM","tag","el","document","createElement","value","setAttribute","forEach","child","appendChild","createTextNode","render","innerHTML","view","app","entry","actions","state","appState","renderEntry","viewWithActions","bindActions","firstView","Object","keys","reduce","boundActions","action","assign"],"mappings":"IAAaA,IAAI,SAAJA,CAAI;SAAO;QAACC,KAAD,uEAAS,EAAT;WAAgB;wCAAIC,QAAJ;gBAAA;;;aAAkB;gBAAA;oBAAA;0BAAA;aAInDD,MAAME;OAJ2B;KAAhB;GAAP;CAAV;;AAOP,IAAMC,YAAY,SAAZA,SAAY,OAA8B;MAA3BC,GAA2B,QAA3BA,GAA2B;MAAtBJ,KAAsB,QAAtBA,KAAsB;MAAfC,QAAe,QAAfA,QAAe;;MACxCI,KAAKC,SAASC,aAAT,CAAuBH,GAAvB,CAAX;;OAEK,IAAIF,GAAT,IAAgBF,KAAhB,EAAuB;QACfQ,QAAQR,MAAME,GAAN,CAAd;;QAEI,OAAOM,KAAP,KAAiB,UAArB,EAAiC;SAC5BN,GAAH,IAAUM,KAAV;KADF,MAEO;SACFC,YAAH,CAAgBP,GAAhB,EAAqBM,KAArB;;;;WAIKE,OAAT,CAAiB,iBAAS;QACpB,OAAOC,KAAP,KAAiB,QAArB,EAA+B;SAC1BC,WAAH,CAAeN,SAASO,cAAT,CAAwBF,KAAxB,CAAf;KADF,MAEO;SACFC,WAAH,CAAeT,UAAUQ,KAAV,CAAf;;GAJJ;;SAQON,EAAP;CArBF;;AAwBA,IAAMS,SAAS,SAATA,MAAS;SAAS,gBAAQ;UACxBC,SAAN,GAAkB,EAAlB;UACMH,WAAN,CAAkBT,UAAUa,IAAV,CAAlB;GAFa;CAAf;;AAKA,IAAaC,MAAM,SAANA,GAAM,CAACC,KAAD,EAAQF,IAAR,EAAcG,OAAd,EAAuBC,KAAvB,EAAiC;MAC9CC,WAAWD,KAAf;MACME,cAAcR,OAAOI,KAAP,CAApB;MACMK,kBAAkBP,KAAKQ,YAAYL,OAAZ,CAAL,CAAxB;MACMM,YAAYF,gBAAgBF,QAAhB,CAAlB;;cAEYI,SAAZ;;WAESD,WAAT,CAAqBL,OAArB,EAA8B;WACrBO,OAAOC,IAAP,CAAYR,OAAZ,EAAqBS,MAArB,CAA4B,UAACC,YAAD,EAAe3B,GAAf,EAAuB;UAClD4B,SAASX,QAAQjB,GAAR,CAAf;;mBAEaA,GAAb,IAAoB,iBAAS;mBAChBwB,OAAOK,MAAP,CAAc,EAAd,EAAkBD,OAAOtB,KAAP,EAAca,QAAd,CAAlB,CAAX;oBACYE,gBAAgBF,QAAhB,CAAZ;OAFF;;aAKOQ,YAAP;KARK,EASJ,EATI,CAAP;;CATG;;;;"}